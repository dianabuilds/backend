# План миграции слоёв фронтенда

## Что сделано
- Вынесли макеты `ContentLayout` и `PlatformAdminFrame` в `src/shared/layouts`, сохранив прежний API страниц.
- Обновили фичи (`NodesView`, `RelationsView`, `FlagsView`, `IntegrationsView`, `AuditView`, `SystemView`) так, чтобы они зависели от shared-слоя, убрав обратные импорты в страницы.
- Добавили быстрый анализ слоёв в `npm run lint` через скрипт `scripts/analyze-frontend-deps.mjs --check`.

## Следующие шаги
1. Проверить, требуют ли новые shared-макеты дополнительных сториз или визуальных тестов, и добавить их при необходимости.
2. Проанализировать оставшиеся импорты `pages → features`, составить план постепенного выноса повторяющихся блоков в `shared`/`widgets`.
3. Расширить автоматическую проверку на `widgets` и `entities`, добавив правила в `analyze-frontend-deps.mjs` или ESLint.
4. Включить скрипт в CI (например, отдельным шагом GitHub Actions), чтобы запретить появление регрессий без ручных запусков.

## Критерии завершения миграции
- Фичи и виджеты используют только компоненты из `shared`/`entities`/`widgets`, без прямых ссылок на страницы.
- В shared-слое задокументированы обязательные макеты и конвенции по пропсам.
- Проверка слоёв выполняется автоматически на CI и блокирует нарушения.
- Документация в `docs/frontend-dependency-report.md` и `docs/code-audit-plan-2025.md` актуальна, описывает как запускать проверки и куда складываются отчёты.
