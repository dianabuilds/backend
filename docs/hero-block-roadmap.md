# План работ по hero-блокам

Документ фиксирует направления миграции hero-блоков на унифицированный PageHero и сопровождает каждую задачу определением готовности, результатом и критериями приёмки. Основной фокус сейчас — контентный хаб, где один layout обслуживает разные контексты (узлы, квесты, уведомления, ops).

## ContentLayout hero (узлы/квесты/миры/уведомления) (apps/web/src/shared/layouts/content/ContentLayout.tsx)

- **Текущий блок:** PageHeader с actions/tabs/stats; страницы часто добавляют второй hero (пример: /notifications через BroadcastsView).
- **Изменения:** перевести ContentLayout на PageHero variant metrics, унифицировать пропсы (title, description, actions, metrics), поддержать слот фильтров. На страницах, где добавляется второй hero, убрать дубль (например, перенести метрики из BroadcastsView в layout).
- **Группировка:** Nodes, Quests, Notifications — общий шаблон с четырьмя метриками (drafts, published, avg links, queued). Длинные описания вынести в основной контент, справочные карточки («AI Studio preview») размещать ниже hero.
- **Кодировка:** все описания и подписи хранить в UTF-8, без артефактов cp1251.

### Definition of Ready
- Согласованы стартовые метрики и CTA для контекстов 
odes, quests, 
otifications, ops.
- Таб-навигация выровнена с PrivateAppRoutes и актуальными ссылками.
- Решено, какие фильтры живут в hero, а какие — под ним (например, статусы для рассылок).

### Definition of Done
- ContentLayout использует PageHero metrics, табы продолжают работать как прежде.
- Страницы (NodesOverviewPage, QuestsOverviewPage, TagsPage, Notifications и т.д.) не создают второй hero и передают метрики через layout.
- Дублирующиеся описания и показатели удалены или перенесены в основной контент.
- Проверено отображение в светлой и тёмной темах, тексты сохранены в UTF-8.

### Acceptance Criteria
- Пользователь видит единый hero без повторяющихся строк и показателей.
- Метрики обновляются без ручного рефреша страницы (используем существующие хуки).
- Фильтры в hero не ломают адаптив: статусы сворачиваются в две строки, поиск остаётся доступен.

## Кросс-срез: кодировка и документация

- **Изменения:** все файлы с описаниями hero-блоков переводим в UTF-8 без BOM. Обновляем docs/page-hero-pattern.md и PageHero.docs.mdx, фиксируем новые варианты (metrics, фильтры, шаблоны метрик).

### Definition of Ready
- Подготовлен перечень файлов с унаследованной кодировкой.
- Согласован план миграции текста и Storybook документации.

### Definition of Done
- Документация и интерфейс отображают корректный текст вместо кракозябр.
- Обновлены скриншоты/примеры в Storybook, внутренние ссылки не ломаются.
- Проверка File/iconv подтверждает UTF-8, линтеры проходят без предупреждений.

### Acceptance Criteria
- Внутренние команды подтверждают, что hero-блоки читаемы и не содержат дублированных элементов.
- Истории PageHero в Chromatic отражают новые сценарии (метрики, фильтры, варианты для контента).

---

Следующие итерации расширяют миграцию на observability, moderation и административные экраны (см. отдельные ADR). Каждый блок выносится в отдельный тикет, чтобы тестировать и релизить изменения по направлениям, не блокируя контентную команду.
