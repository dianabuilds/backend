Единая система обработки ошибок и устойчивости

Цель
Сделать поведение приложения предсказуемым и единообразным при сбоях: корректно сообщать пользователю, безопасно восстанавливаться, логировать и измерять проблемы.

Состав решений
- Таксономия ошибок: AppError с кодами (network, timeout, unauthorized, forbidden, not_found, conflict, rate_limited, server, validation, unknown) и нормализацией.
- Глобальные Error Boundary для сбоев рендеринга и неожиданных исключений в компонентной иерархии.
- Единый HTTP‑клиент с таймаутами, экспоненциальными ретраями и маппингом статус‑кодов на коды ошибок.
- Конфигурация React Query: единые retry/retryDelay и onError, отправляющий ошибки в телеметрию.
- Телеметрия: единый API логирования ошибок, позже переключаемый на Sentry/иные провайдеры.

Как интегрировать
1) Оборачиваем приложение:
   - <ErrorBoundary> на уровне корня UI.
   - <AppQueryProvider> для унифицированных политик запросов.
2) Заменяем прямые вызовы fetch на httpClient.request, задаём таймауты и разумные retry там, где уместно.
3) Во вьюхах используем userMessageFor(error) для человекочитаемых сообщений и показываем нотификации/подсказки.
4) В формах отделяем ошибки валидации (validation) от системных и отображаем подсветку полей + общий тост.
5) Отправляем ошибки в телеметрию (logError), добавляем хлебные крошки (addBreadcrumb) в ключевых шагах.
6) Для idempotent‑мутаций включаем оптимистичные обновления с откатом, для мутирующих — подтверждения и защита от дублей.
7) Важно: для 429 учитываем Retry-After; для 401 инициируем переавторизацию.

Политика ретраев (по умолчанию)
- Ретраим: network, timeout, server (5xx), rate_limited (с учётом Retry-After).
- Не ретраим: validation, unauthorized, forbidden, not_found, conflict.
- Задержка: экспоненциальная с джиттером, база 500 мс, потолок 10 с.

Проверки качества
- Unit-тесты: нормализация ошибок, маппинг статус‑кодов, backoff/timeout.
- Интеграционные тесты: критичные сценарии с отказами сети/серверов.
- E2E: кейсы потери сети, таймаутов, 401/403/404/409/429/5xx.
- Наблюдаемость: дашборды по частоте ошибок, latency, доля успешных ретраев.
