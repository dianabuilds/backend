# Data Access

Работа с данными в клиенте построена на React Query.

## Query patterns

- Используйте стабильные ключи запроса: `['user', id]`.
- Оборачивайте запросы в собственные хуки, например `useUserQuery`.
- Для мутаций применяйте `useMutation` с оптимистичными апдейтами и `queryClient.invalidateQueries` после успешного завершения.
- Кэш хранится столько, сколько указано в `staleTime`; для фонового обновления используйте `refetchOnWindowFocus` и `refetchInterval`.
- Для списков применяйте `useInfiniteQuery` с постраничной загрузкой и мерджингом страниц в массив.

## Error handling

- Обрабатывайте ошибки через `onError` и показывайте пользователю дружелюбные сообщения.
- Для глобальных ошибок настраивайте перехватчик `queryClient` и логируйте через Sentry.
