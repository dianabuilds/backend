# PageHero: обновлённые правила

Компонент `PageHero` отвечает за «первый экран» на внутренних страницах Tailux. Он расположен в `apps/web/src/shared/ui/patterns/PageHero.tsx`, истории и гайды — `PageHero.stories.tsx` и `PageHero.docs.mdx`. Этот документ фиксирует текущий облик (осень 2025) и служит чек-листом при проектировании новых экранов или редизайне существующих.

## Когда использовать `PageHero`

Hero-блок нужен, когда странице требуется:

- сразу обозначить контекст (заголовок, краткое описание, навигационные крошки);
- подсветить ключевые метрики/статусы, за которыми следят владельцы продукта;
- показать основное действие (и максимум одно дополнительное) до прокрутки;
- вложить фильтры, влияющие на данные ниже, если без них цифры теряют смысл.

Если экран — просто таблица, форма или вспомогательное окно, используйте компактный `SectionHeading`/`PageHeader` и откажитесь от hero.

## Варианты и высота

| Вариант | Назначение | `variant` проп | Высота (max) | Когда применять |
|---------|------------|----------------|--------------|-----------------|
| **Cinematic** | промо/онбординг, продуктовые обзоры | `default` | 420 px | редко; только когда нужна визуальная драматургия |
| **Metrics** | дашборды с KPI, контент-хабы | `metrics` | 460 px | по умолчанию для разделов Content/Observability, если нужно ≥3 метрики |
| **Compact** | настройки, каталоги, редакторы | `compact` | 320 px | основной режим для админки; цель — занимать ≤50 % высоты текущего hero |

> **Важно:** закрепляем правило «один hero на странице». Вторичные заголовки/CTA не дублируем в контенте ниже.

## Структура блока

```
┌───────────────────────────────────────────────────────────┐
│ Eyebrow / Breadcrumbs (опционально)                      │
│ Заголовок + статус-бейджи         CTA / вторичное действие│
│ Описание (до 2 строк)                                     │
│ Фильтры / переключатели (если критично для понимания метрик)
│ Сетка метрик (1–4 карточки)                               │
│ Слот children (alerts, вкладка, callout)                  │
└───────────────────────────────────────────────────────────┘
```

- Заголовок — максимум две строки. В описании допускается до 200 символов.
- Статусы (`saving`, `publishing`, `disabled` и т.п.) показываем бейджами рядом с заголовком, чтобы не раздувать высоту.
- Блок метрик ограничиваем тремя карточками. Если нужно показать больше чисел, выносим детали в контент ниже (карточки, таблицы, вкладки).
- Основное действие располагаем справа, вторичное — через spacing `gap-3`. Остальные действия прячем в overflow/меню.

## Метрики и карточки

- Для списка используем `PageHeroMetric[]`. Карточка = `label → value → hint`. При отсутствии значения выводим `—`.
- Количество метрик: до 4 на десктопе (`metrics`), до 3 в компактном режиме. Если нужно больше, уводим детализацию в таблицу ниже.
- Значения форматируем через `toLocaleString('ru-RU')`, единицы измерения выносим в hint или helper.
- Поддерживаются акценты (`positive`, `warning`, `danger`, `neutral`) — используйте их только при наличии бизнес-логики (рост/падение, SLA, деплойные риски).

## Фильтры и состояния

- Фильтры в hero — только если без них метрики вводят в заблуждение (например, нужны временные диапазоны или выбор сегмента). В остальных случаях переносим управление под блок.
- `PageHero` поддерживает слот `filters`: компонент чипов/селектов занимает всю ширину блока, но для компактного варианта рекомендовано не более трёх элементов.
- Для острых предупреждений (валидация, аварии) используйте `children` и вставляйте `Alert`/`Callout`; не помещайте туда большие таблицы.

## Навигация и хлебные крошки

- Проп `breadcrumbs` принимает массив `{ label, to? }`. Ссылки автоматически получают стиль hover и `aria-label`.
- В компактном режиме допускается только один уровень крошек; всё, что старше, стоит переносить в заголовок левой колонки/меню.
- Eyebrow (краткая метка раздела) показывает стадию или тип контента: `LIVE`, `ALPHA`, `BETA`. Не используйте его как замену заголовку.

## Адаптивность

- ≥1280 px: `metrics` выводит до четырёх карточек в ряд; `compact` — до трёх.
- 768–1279 px: сетка падает в две колонки, CTA автоматически переезжают под заголовок.
- <768 px: одна колонка; если CTA критично, продублируйте его в нижней fixed-панели страницы.

## Реализация и аналитика

- Оборачивайте блок в `data-analytics="hero:<slug>"` для консистентных событий.
- Всегда проверяйте светлую/тёмную темы и два состояния: «нет данных» (метрики пустые) и «загрузка» (скелетоны).
- Обновляйте сторибук и Chromatic-снимки при добавлении вариантов или новых пропсов.
- Следите за кодировкой и вынесением копирайта в `i18n`-ресурсы при необходимости.

## Альтернативы

Используйте компактный `PageHeader` или кастомный топ-блок, если:

- нужен редактор/форма с минимальными отступами (пример — `/management/site-editor/pages/<id>`);
- страница состоит из одного графика без дополнительных действий;
- вы показываете результат быстрого поиска/фильтра, где важнее скорость, чем контекст.

Во всех остальных случаях `PageHero` — основной паттерн, обеспечивающий единый язык навигации и метрик внутри админки.
