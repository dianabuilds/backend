# Правила взаимодействий в админских интерфейсах

Документ задаёт единые принципы для экранов админки с таблицами, hero-блоками и фильтрами. Следуем им независимо от того, одна ли команда ведёт фичу или несколько команд коммитят параллельно.

## Быстрые действия
- Добавляем быстрые действия только для сценариев, которые выполняют не реже раза в неделю и которые укладываются в два клика без дополнительного текста-пояснения.
- В строке таблицы держим максимум три элемента: основное действие, вторичное и меню `...`. Остальное переносим в выпадающий список.
- Любое необратимое действие всегда открывает окно подтверждения с понятным текстом; никогда не выполняем delete/ban по первому нажатию.
- На десктопе иконки всегда сопровождаем текстовой меткой; на мобильных допускается иконка без текста, но обязательно сохраняем корректный `aria-label`.
- Во время загрузки заменяем кнопки скелетонами/заблокированными элементами, чтобы ширина строки не прыгала.
- Поддержка клавиатуры обязательна: таб- порядок сверху вниз, активация — `Enter` или `Space`.

## Метрики в hero
- Три ключевые метрики располагаем в hero-заголовке; второстепенные показатели выносим в блок аналитики ниже.
- Формат чисел: две цифры после запятой максимум, тысячные отделяем узким пробелом (`12 500`, `9 230.45`).
- У каждой метрики опционально есть бейдж дельты; если дельты нет, бейдж скрываем, а не показываем `0%`.
- Если данные старше пяти минут — выводим пилюлю с временем обновления и даём действие `Обновить`.
- Состояния загрузки/ошибки оформляем через общие компоненты `MetricSkeleton` и `MetricError`, чтобы макет не дёргался.
- Для аналитики используем теги `data-analytics="metric:<slug>"`, чтобы события отслеживались единообразно.

## Адаптивность
- Контрольные точки: десктоп `>= 1280px`, планшет `768–1279px`, мобильные `< 768px`. Проверяем каждый breakpoint перед мержем.
- На планшетах метрики hero раскладываем в две строки, вторичные действия переезжают в меню `...`.
- На мобильных hero становится одноколоночным, под шапкой появляется фиксированная панель быстрых действий.
- Таблицы деградируют в карточки: actions остаются внизу, горизонтальный скролл запрещён.
- Типографику берём только из дизайн-токенов; никаких «магических» пикселей в медиазапросах.

## Фильтры и поиск
- Полоса фильтров располагается сразу под hero. Основные фильтры занимают первую строку, расширенные прячем за `Больше фильтров` с счётчиком.
- Поиск всегда последним элементом первой строки. Плейсхолдер описывает область (`Поиск по нодам`).
- У каждого фильтра есть явное действие сброса: на десктопе текстовая кнопка `Сбросить` справа, на мобильных — внутри выпадающего меню.
- Состояние фильтров сохраняем в query-параметрах URL; localStorage/скрытые состояния не используем.
- Текстовые фильтры дебаунсим 350 мс, запросы отправляем по `Enter` или `blur`, чтобы ввод оставался отзывчивым.
- Пустые и ошибочные состояния отражают активные фильтры, чтобы пользователь видел контекст.

## Чек-лист реализации
- Обновляем истории Storybook для таблиц и hero при изменении пресетов или слотов.
- Обновляем Chromatic-снимки для новых пресетов, вариантов быстрых действий и раскладок фильтров.
- Перед закрытием задачи проверяем события в аналитике: названия метрик и действий должны соответствовать договорённостям.
- Новые пресеты и правила фильтров документируем в README компонента, чтобы контракт был прозрачен.
