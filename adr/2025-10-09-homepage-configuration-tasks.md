# Задачи по реализации ADR «Управление публичной главной и дев-блогом через конфигурацию»

## Backend

### B1. Миграции home_config и аудит
**Описание**: создать схему хранения конфигураций главной страницы и историю публикаций в БД.
**Шаги**:
1. Подтвердить с архитектором структуру таблиц `product_home_configs` и `home_config_audits`, включая типы полей и индексы.
2. Добавить Alembic-миграции (upgrade/down) с созданием таблиц, enum-типов статусов и необходимых индексов.
3. Обновить модели/репозитории SQLAlchemy для новых таблиц и перечислений.
4. Прогнать миграции локально и на тестовой БД, убедиться в корректности отката.
5. Задокументировать схему в ADR (приложить диаграмму или описание).
**Definition of Ready**:
- Утверждённая схема таблиц и enum-значений.
- Актуальная база миграций без конфликтующих ревизий.
- Доступ к тестовой БД и правам на выполнение миграций.
**Definition of Done**:
- Миграции применяются и откатываются без ошибок.
- SQLAlchemy-модели синхронизированы со схемой.
- Генерация документации/ER-диаграммы обновлена.
- Локальные и CI-тесты миграций успешно проходят.
**Acceptance Criteria**:
- Таблица `product_home_configs` содержит поля `id UUID`, `slug TEXT UNIQUE`, `version BIGINT`, `status`, `data JSONB`, `created_by`, `updated_by`, `created_at`, `updated_at`, `published_at`, `draft_of`.
- Таблица `home_config_audits` фиксирует `config_id`, `version`, `action`, `actor`, `created_at` и имеет индекс по `config_id`.
- Enum `home_config_status` включает значения `draft` и `published`.

### B2. Репозиторий и сервис HomeConfig
**Описание**: реализовать слой доступа и бизнес-логику управления черновиками и публикациями конфигураций.
**Шаги**:
1. Описать JSON Schema для блоков и утвердить её с фронтенд-командой.
2. Реализовать `HomeConfigRepository` с методами `get_active`, `get_draft`, `create_draft`, `update_draft`, `publish`, `restore_version`.
3. Создать `HomeConfigService`, добавив валидацию JSON Schema, проверку уникальности `block.id` и инкремент версий.
4. Подключить аудит: запись событий publish/restore в `home_config_audits`.
5. Написать unit-тесты на сценарии создания, редактирования, публикации и восстановления.
**Definition of Ready**:
- JSON Schema блоков согласована и доступна в репозитории.
- Миграции B1 влиты и выполнены в окружении разработчика.
- Определены бизнес-правила версионирования и авторизации.
**Definition of Done**:
- Все методы репозитория/сервиса покрыты unit-тестами.
- JSON Schema хранится в кодовой базе и подключена к валидации.
- Аудит заполняется при publish/restore.
- Проверки линтера/CI проходят.
**Acceptance Criteria**:
- Попытка сохранить конфиг с дублирующим `block.id` завершается ошибкой 422.
- Публикация создаёт новую запись с `status=published`, увеличивает `version` и фиксирует `published_at`.
- Восстановление версии создаёт новый `draft` с данными выбранной версии и `version=old_version+1` после последующей публикации.

### B3. HomeComposer и источники данных
**Описание**: подготовить модуль сборки данных для главной страницы с поддержкой manual/auto источников.
**Шаги**:
1. Спроектировать интерфейсы `DataSourceStrategy`, `ManualSource`, `AutoSource` и сервисы получения сущностей (nodes, quests, dev_blog).
2. Реализовать `HomeComposer`, который разворачивает блоки конфигурации, учитывая `enabled`, `dataSource.mode`, лимиты и фильтры.
3. Добавить защиту от пустых коллекций: пропуск блоков без данных и формирование fallback-сообщений.
4. Интегрировать Composer с кэшем (интерфейс для последующего Redis).
5. Написать unit-тесты для manual и auto сценариев, а также для обработки ошибок источников.
**Definition of Ready**:
- Документированы доступные сущности и их API.
- Доступны фикстуры данных для nodes/quests/dev_blog.
- Определены требования к поведению при пустых результатах.
**Definition of Done**:
- Composer покрыт тестами (успешные и отказные сценарии).
- Логирование ошибок и таймаутов реализовано.
- Код задокументирован (docstring/README модуля).
**Acceptance Criteria**:
- `manual` блок возвращает карточки по переданным `items`, отсутствующие ID игнорируются с записью в лог.
- `auto` блок применяет фильтр `tag`, `limit≤12`, сортирует по `order` и ограничивает время ответа.
- При пустом наборе данных блок не попадает в итоговый ответ `public/home`.

### B4. Публичный и админский API
**Описание**: реализовать REST-эндпоинты для публикации, предпросмотра и выдачи главной страницы.
**Шаги**:
1. Описать контракт OpenAPI для `GET /v1/public/home` (кешируемая выдача опубликованной конфигурации).
2. Реализовать контроллер FastAPI, подключив `HomeConfigService` и `HomeComposer`.
3. Настроить публичный доступ без токена, добавить HTTP-кеш (ETag/Cache-Control) и инвалидацию при публикации.
4. Написать интеграционные тесты (200, 404, 503) и контрактные проверки.
**Definition of Ready**:
- Service-слой (B2, B3) реализован и протестирован.
- Согласованные спецификации ответов/ошибок.
- Настроенная инфраструктура авторизации.
**Definition of Done**:
- Эндпоинты задокументированы в OpenAPI и покрыты тестами.
- Публичный ответ кэшируемый, админские маршруты логируются.
- CI прогоняет контракты без регрессий.
**Acceptance Criteria**:
- `GET /v1/public/home` возвращает структуру блоков и заголовки `ETag`, `Cache-Control: public, max-age=300`.
- Управление черновиками выполняется через `/v1/site/pages/*`, поэтому `GET /v1/public/home` должен корректно отражать опубликованную версию и обновлять кэш после публикации страницы в Site Editor.

### B5. Расширения DevBlog
**Описание**: подготовить API и данные дев-блога для интеграции с главной и публичным вебом.
**Шаги**:
1. Добавить в модель нод поле `slug` с уникальным индексом и статусом публикации.
2. Реализовать методы `get_post_by_slug`, `get_adjacent_posts`, `list_latest_for_home` в DevBlogService.
3. Создать эндпоинты `GET /v1/nodes/dev-blog/{slug}` и `/preview` с проверкой прав.
4. Обновить сериализаторы, чтобы отдавать метаданные (title, summary, author, publish_at).
5. Написать тесты на получение опубликованного, чернового и отсутствующего поста.
**Definition of Ready**:
- Уточнён формат slug и правила его генерации.
- Решено, какие статусы доступны для предпросмотра.
- Готовы фикстуры постов для тестов.
**Definition of Done**:
- DevBlogService покрыт тестами.
- Новые индексы применены миграцией.
- Эндпоинты отражены в OpenAPI.
- Линтеры и статический анализ проходят.
**Acceptance Criteria**:
- Запрос существующего slug возвращает пост с соседями (prev/next) при наличии.
- Запрос `/preview` доступен только авторизованному редактору.
- Метод `list_latest_for_home(limit)` возвращает максимум N опубликованных постов по дате.

### B6. Кэширование и аудит публикаций
**Описание**: внедрить Redis-кэш для публичной главной и полное логирование публикаций.
**Шаги**:
1. Настроить подключение к Redis и вынести параметры (ttl, ключи) в конфигурацию.
2. Реализовать кэш-обёртку для `HomeComposer` с инвалидацией при публикации/restore.
3. Добавить метрики (Prometheus) для попаданий/промахов кэша и времени ответа `/v1/public/home`.
4. Расширить аудит хранением `diff` (JSONPatch) между версиями и записывать пользователя/команду.
5. Написать автоматические тесты кэширования и smoke-тест на метрики.
**Definition of Ready**:
- Redis-кластер доступен во всех окружениях.
- Определён формат ключей и TTL.
- Согласованы требования к аудит-данным (что входит в diff).
**Definition of Done**:
- Ответ `/v1/public/home` отдается из Redis при повторном запросе в течение TTL.
- Метрики видны в мониторинге и задокументированы.
- Аудит содержит полные записи publish/restore.
**Acceptance Criteria**:
- После публикации новый вызов `/v1/public/home` отдаёт свежие данные и обновлённый ETag.
- В Grafana появляется метрика `home_cache_hit_ratio`.
- В аудите видно, кто и когда опубликовал конфигурацию, и краткий diff.

## Admin UI (`apps/web`)

### A1. API-клиент управления главной
**Описание**: подготовить слой данных для работы страницы управления главной.
**Шаги**:
1. Добавить запросы `getDraft`, `saveDraft`, `publishHome`, `previewHome`, `restoreHome` в `shared/api/home.ts` (RTK Query или fetch-клиент).
2. Реализовать типизацию ответов/запросов на основе OpenAPI.
3. Настроить обработку ошибок (toast/notification) и централизованный перехват 401/403.
4. Написать unit-тесты на сериализацию и обработку ошибок.
**Definition of Ready**:
- OpenAPI спецификация обновлена (B4).
- Решены используемые инструменты (RTK Query/React Query).
- Настроен механизм авторизации в приложении.
**Definition of Done**:
- API-клиент переиспользуемый, покрыт тестами и типами.
- Обработчики ошибок показывают понятные сообщения.
- Линтер/тайпчек проходят.
**Acceptance Criteria**:
- Успешный вызов `saveDraft` сохраняет конфигурацию и возвращает обновлённую версию.
- Ошибка 403 вызывает отображение уведомления «Недостаточно прав».
- Клиент использует один источник прав доступа (token) без дублирования кода.

### A2. Редактор блоков главной
**Описание**: разработать страницу `/management/site-editor/pages/:id` с drag-and-drop редактором блоков.
**Шаги**:
1. Создать контейнер страницы, подключить API-клиент и загрузить текущий черновик.
2. Реализовать список блоков и Canvas с drag&drop (dnd-kit), поддержкой reorder и enable/disable.
3. Добавить формы настроек для каждого типа блока (hero, carousels, dev_blog_list и т.д.) с валидацией по JSON Schema.
4. Обеспечить автосохранение (debounce) и ручное сохранение (кнопка «Сохранить черновик»).
5. Написать UI-тесты (React Testing Library) на добавление/удаление/редактирование блоков.
**Definition of Ready**:
- Дизайн-макеты и UX-флоу согласованы.
- JSON Schema доступна в фронтенде.
- Компоненты UI-библиотеки готовы (buttons, modals, form controls).
**Definition of Done**:
- Редактор поддерживает все типы блоков из ADR.
- Состояние черновика сохраняется/восстанавливается при обновлении страницы.
- Тесты и линтеры проходят.
**Acceptance Criteria**:
- Добавление нового блока через панель приводит к появлению блока в списке и на Canvas.
- Отключённый (`enabled=false`) блок визуально помечен и исключается из предпросмотра.
- Попытка сохранить некорректный блок выводит ошибки валидации рядом с полями.

### A3. Превью конфигурации и обработка ошибок
**Описание**: обеспечить визуальный предпросмотр главной и информирование об ошибках Composer.
**Шаги**:
1. Встроить iframe/preview-компонент, запрашивающий `POST /v1/site/pages/{id}/preview`.
2. Передавать конфигурацию и параметры локализации, отображать SSR-компоненты в режиме превью.
3. Реализовать fallback UI на случай ошибок (HTTP/Network) с возможностью перезапроса.
4. Логировать ошибки в Sentry и показывать пользователю дружелюбные сообщения.
5. Добавить e2e-тест Cypress, проверяющий загрузку превью и отображение ошибок.
**Definition of Ready**:
- API превью (B4) доступен.
- Дизайн превью и сообщения об ошибках утверждены.
- Настроен Sentry/логирование на фронтенде.
**Definition of Done**:
- Превью отображает актуальное состояние черновика.
- Ошибки Composer видны редактору с деталями.
- Тесты и аналитика подключены.
**Acceptance Criteria**:
- Успешный вызов превью показывает блоки в том же порядке, что и в редакторе.
- При сетевой ошибке пользователь видит CTA «Попробовать снова» и информацию об ошибке.
- Все ошибки превью логируются с тегом `feature:home-preview`.

### A4. Публикация и восстановление версий
**Описание**: реализовать пользовательский поток публикации и отката конфигураций.
**Шаги**:
1. Добавить кнопки «Опубликовать», «Восстановить версию», модальные подтверждения и отображение истории.
2. Получать историю версий с бэкенда и визуализировать автора, время, комментарии.
3. Интегрировать вызовы publish/restore, обновлять состояние редактора и уведомления.
4. Реализовать блокировку UI на время публикации и показ статуса успеха/ошибки.
5. Написать e2e-тест на сценарий публикации и восстановления предыдущей версии.
**Definition of Ready**:
- API истории версий и публикации готов (B4).
- Дизайн модалок и уведомлений согласован.
- Решено, где хранить комментарии к публикациям (если есть).
**Definition of Done**:
- Пользователь видит историю версий и может восстановить любую из последних N.
- Уведомления и блокировки работают корректно.
- Тесты (unit + e2e) покрывают ключевые сценарии.
**Acceptance Criteria**:
- Публикация обновляет статус черновика, выводит уведомление «Готово» и фиксирует нового автора/время.
- Восстановление выбранной версии создаёт новый черновик и уведомляет пользователя.
- История отображает минимум 10 последних публикаций с версией и автором.

### A5. Поддержка дев-блога в UI нод
**Описание**: упростить работу редакторов с материалами дев-блога и их связкой с главной.
**Шаги**:
1. Добавить фильтр «Dev Blog» в списке нод `/nodes/library`.
2. В карточках постов реализовать переключатель «Показывать на главной» (тег/метаданные).
3. Интегрировать picker постов в редактор блоков для быстрого выбора материалов.
4. Обновить локализацию (ru/en) и состояния загрузки.
5. Написать UI-тесты на фильтр и переключатель.
**Definition of Ready**:
- API dev-blog (B5) завершён.
- Дизайны фильтра и переключателя согласованы.
- Согласован формат хранения флага «Показывать на главной».
**Definition of Done**:
- Фильтр и переключатель доступны и работают на всех окружениях.
- Picker интегрирован в редактор блоков.
- Тесты и локализация обновлены.
**Acceptance Criteria**:
- Фильтр «Dev Blog» показывает только ноды с тегом dev-blog.
- Переключатель меняет флаг и синхронизируется с API.
- В редакторе блоков можно выбрать пост из списка без ручного ввода ID.

## Публичный веб (`apps/web`)

### P1. Маршруты `/`, `/dev-blog`, `/dev-blog/:slug`
**Описание**: добавить страницы главной и дев-блога с SSR-загрузкой данных.
**Шаги**:
1. Определить маршруты в `App.tsx`, настроить загрузчики данных (React Query/loader).
2. Подключить `GET /v1/public/home` и `GET /v1/nodes/dev-blog` на стороне клиента/SSR.
3. Настроить начальное состояние (hydration) для home-конфигурации.
4. Добавить skeleton-состояния и обработку ошибок на уровне маршрутов.
5. Написать unit-тесты маршрутов и SSR-снимки.
**Definition of Ready**:
- Бэкенд-эндпоинты доступны (B4, B5).
- Решена стратегия SSR/SSG для приложения.
- Согласованы макеты страниц.
**Definition of Done**:
- Страницы доступны по новым URL, поддерживают SSR.
- Обработчики ошибок и skeleton'ы работают.
- Тесты и линтер проходят.
**Acceptance Criteria**:
- `/` отображает блоки согласно конфигурации и загружает данные до рендера.
- `/dev-blog` показывает список постов с пагинацией.
- `/dev-blog/:slug` отображает деталку поста и соседей.

### P2. Рендер блоков HomePage
**Описание**: реализовать компонент-фабрику для отрисовки блоков главной.
**Шаги**:
1. Создать `BlockRenderer` с поддержкой типов (hero, carousels, dev_blog_list, editorial_picks и т.д.).
2. Реализовать компоненты блоков, переиспользуя дизайн-систему и existing UI-паттерны.
3. Поддержать скрытие `enabled=false` и fallback при пустых данных.
4. Добавить подсчёт аналитики `home.block_rendered` с передачей типа и порядкового номера.
5. Написать unit-тесты на каждый тип блока и снимки в Storybook.
**Definition of Ready**:
- Описания каждого типа блока и структуры данных подтверждены.
- UI-компоненты и дизайн-гайды доступны.
- Определена схема аналитики.
**Definition of Done**:
- Все блоки отображаются корректно на разных размерах экрана.
- Анимации/лоадеры согласованы и реализованы.
- Тесты и сторибуки обновлены.
**Acceptance Criteria**:
- `hero` блок показывает заголовок, CTA и изображение (если есть).
- `dev_blog_list` отображает карточки с данными из API и учитывает лимит.
- Отключённый блок не попадает в DOM и не генерирует событие аналитики.

### P3. Страницы списка и детали дев-блога
**Описание**: оформить публичный дев-блог с SEO и навигацией.
**Шаги**:
1. Создать компонент списка с фильтрами по тегам/датам и пагинацией.
2. Реализовать страницу поста со структурой (hero, контент, автор, соседние посты, share).
3. Подключить OpenGraph/structured data (JSON-LD) для постов.
4. Добавить локализацию (RU/EN) для всех статических текстов и форматирования дат.
5. Написать Cypress e2e-тесты на навигацию по списку и открытие поста.
**Definition of Ready**:
- Доступен API dev-blog (B5).
- UI-макеты утверждены.
- SEO-требования согласованы с маркетингом.
**Definition of Done**:
- Список и страница поста соответствуют дизайну.
- SEO-мета и JSON-LD присутствуют.
- Тесты (unit + e2e) проходят.
**Acceptance Criteria**:
- `/dev-blog` выводит последние посты, позволяет переходить на следующую страницу.
- `/dev-blog/:slug` содержит title, description, OG-теги и ссылки на предыдущий/следующий пост.
- Локализация корректно переключается и форматирует даты в соответствии с языком.

### P4. Обработка ошибок и аналитика главной
**Описание**: добавить единый механизм обработки ошибок и RUM-событий для главной страницы.
**Шаги**:
1. Реализовать ErrorBoundary/Toast для отображения ошибок загрузки блоков.
2. Настроить логирование ошибок в Sentry с контекстом конфигурации (version, ETag).
3. Добавить RUM-события (`home.load_start`, `home.load_success`, `home.load_error`).
4. Реализовать fallback-блок «Раздел временно недоступен».
5. Написать unit-тесты на ErrorBoundary и проверку отправки событий.
**Definition of Ready**:
- Доступ к Sentry и аналитическим системам.
- Согласованы названия событий и payload.
- Решено, как показывать fallback UI.
**Definition of Done**:
- Ошибки отображаются и логируются автоматически.
- Аналитика фиксирует успешные/ошибочные загрузки.
- Тесты и линтер проходят.
**Acceptance Criteria**:
- При ошибке загрузки пользователь видит fallback и кнопку «Обновить».
- Событие `home.load_error` содержит `configVersion` и код ошибки.
- При успешной загрузке отправляется `home.load_success` с временем рендера.

### P5. SEO и производительность главной
**Описание**: оптимизировать главную и дев-блог под поисковые системы и скорость.
**Шаги**:
1. Настроить серверную генерацию метатегов (title, description, canonical) на основе конфигурации.
2. Добавить ленивую загрузку изображений и критический CSS для первых блоков.
3. Интегрировать prefetch для ссылок внутри блоков (quests, nodes).
4. Провести Lighthouse-аудит и внедрить улучшения (LCP, CLS, TBT).
5. Задокументировать рекомендации для контент-команды по длине текстов и изображениям.
**Definition of Ready**:
- Технические требования SEO от маркетинга.
- Доступ к Lighthouse/Pagespeed для тестов.
- Подготовленные предварительные данные для проверки.
**Definition of Done**:
- Показатели LCP/CLS укладываются в целевые значения.
- Метатеги формируются корректно на RU/EN.
- Документация обновлена (`apps/web/homepage-seo-guidelines.md`, раздел Lighthouse в `apps/web/frontend-audit.md`).
**Acceptance Criteria**:
- Lighthouse score ≥ 85 для мобильной версии главной.
- На странице нет незаполненных canonical/OG-тегов.
- Lazy-loading уменьшает нагрузку, и первые блоки рендерятся < 2.5s на тестовом стенде.

## QA и DevOps

### Q1. Конфигурация Redis и мониторинг
**Описание**: подготовить инфраструктуру кэширования и наблюдения за сервисом главной.
**Шаги**:
1. Настроить Redis-инстансы (prod/stage), создать namespace `home:*`.
2. Обновить конфигурации приложения (env vars, secrets) и Helm/terraform манифесты.
3. Добавить дашборд Grafana с метриками `home_cache_hit_ratio`, `public_home_latency`, ошибками кэша.
4. Настроить алерты на деградацию (hit ratio < 70%, latency > 500ms).
5. Провести failover-тест и задокументировать процедуру.
**Definition of Ready**:
- Есть доступ к инфраструктурным репозиториям.
- Согласованы целевые значения метрик и алертов.
- Получены креды для Redis.
**Definition of Done**:
- Конфигурации задеплоены на stage/prod.
- Дашборды и алерты активны.
- Документация по failover доступна.
**Acceptance Criteria**:
- Дашборд показывает данные с stage в реальном времени.
- Алерт срабатывает при искусственном снижении hit ratio до 50%.
- Приложение автоматически переключается на резервный Redis при тестовом сбое.

### Q2. CI/CD обновления
**Описание**: адаптировать pipeline под новую функциональность.
**Шаги**:
1. Добавить запуск миграций и smoke-тестов home/dev-blog в CI.
2. Интегрировать проверку JSON Schema (ajv-cli) на этапе lint/test.
3. Обновить сборку фронтенда: запуск unit/UI/e2e тестов для новых страниц.
4. Настроить публикацию OpenAPI-спецификаций после успешного билда.
5. Провести dry-run pipeline и задокументировать изменения.
**Definition of Ready**:
- Определены необходимые инструменты (ajv, schemathesis, Cypress).
- Доступ к CI-конфигурации.
- Согласованы требования по длительности pipeline.
**Definition of Done**:
- Pipeline выполняет новые шаги без превышения SLA.
- Результаты тестов и спецификаций сохраняются как артефакты.
- Документация по CI обновлена.
**Acceptance Criteria**:
- При нарушении JSON Schema билд падает с понятной ошибкой.
- После билда публикуется свежий swagger.json.
- Время выполнения pipeline укладывается в согласованный лимит.

### Q3. Автоматические тесты API и UI
**Описание**: расширить тестовый набор для гарантий качества.
**Шаги**:
1. Написать pytest-smoke сценарии для `public/home`, `admin/home`, `dev-blog` (200/403/422 кейсы).
2. Настроить schemathesis/contract тесты на соответствие OpenAPI.
3. Подготовить Cypress сценарии: редактирование блока, предпросмотр, публикация.
4. Добавить данные для тестов (fixtures) и очистку окружения после прогонов.
5. Интегрировать отчёты (Allure, Cypress Dashboard) в CI.
**Definition of Ready**:
- API и UI стабильны (базовые фичи реализованы).
- Тестовые аккаунты с нужными ролями созданы.
- Определены метрики покрытия тестами.
**Definition of Done**:
- Тесты выполняются локально и в CI.
- Отчёты доступны команде.
- Документация по запуску тестов обновлена.
**Acceptance Criteria**:
- Smoke API тесты покрывают основные happy-path и ошибки.
- e2e-тест публикации проходит без флак.
- Отчёты включают скриншоты/логи при падениях.

### Q4. Нагрузочное и отказоустойчивое тестирование
**Описание**: оценить производительность и устойчивость нового функционала.
**Шаги**:
1. Подготовить сценарии k6/JMeter для `GET /v1/public/home` и `GET /v1/nodes/dev-blog` (пики 200 rps).
2. Провести нагрузочные тесты на стенде, собрать метрики latency/throughput.
3. Смоделировать отказ Redis и проверить деградацию/восстановление.
4. Оценить потребление ресурсов и предложить оптимизации (кэш, индекс, масштабирование).
5. Задокументировать результаты и рекомендации.
**Definition of Ready**:
- Stage окружение с обновлениями задеплоено.
- Инструменты нагрузочного тестирования настроены.
- Определены целевые показатели производительности.
**Definition of Done**:
- Тесты проведены, результаты зафиксированы.
- План оптимизаций оформлен и согласован.
- Доклад по отказоустойчивости опубликован.
**Acceptance Criteria**:
- При нагрузке 200 rps `public/home` держит P95 < 400ms.
- При отказе Redis система продолжает отвечать (с деградацией до 800ms) и восстанавливается после возврата.
- Рекомендации по масштабированию переданы DevOps.

## Документация и процессы

### D1. Обновление README/вики
**Описание**: предоставить техническую документацию по новой главной и дев-блогу.
**Шаги**:
1. Обновить README/backend с описанием сущности `home_config`, API и кэша.
2. Дополнить вики разделом про HomeComposer, версии и аудит.
3. Добавить инструкции по запуску миграций и локальному тестированию.
4. Провести ревью документации с участием backend/frontend лидов.
5. Опубликовать обновления и уведомить команду.
**Definition of Ready**:
- Технические детали подтверждены по итогам разработки.
- Доступ к репозиторию документации.
- Согласована структура разделов.
**Definition of Done**:
- README и вики актуальны, ссылки рабочие.
- Документация прошла ревью.
- Изменения отражены в changelog/новостях команды.
**Acceptance Criteria**:
- README описывает API, миграции, кэш и команды запуска.
- Вики содержит разделы "Версионирование" и "Процесс публикации".
- Команда подтверждает получение обновлений.

### D2. Гайд для контент-редакторов
**Описание**: подготовить обучающие материалы для работы с новой главной и дев-блогом.
**Шаги**:
1. Создать пошаговый гайд (скринкасты/скриншоты) по редактированию блоков и публикации.
2. Описать правила заполнения блоков (ограничения текстов, изображения, теги).
3. Разработать чек-лист перед публикацией (проверка превью, локализация, ссылки).
4. Провести обучающую сессию и собрать обратную связь.
5. Обновить гайд по итогам обратной связи и разместить в вики.
**Definition of Ready**:
- UI и процессы стабилизированы (после A4, P3).
- Согласован формат обучения (видео/док).
- Собраны требования от контент-команды.
**Definition of Done**:
- Гайд опубликован, доступен редакторам.
- Чек-лист используется в процессе публикации.
- Обратная связь учтена и задокументирована.
**Acceptance Criteria**:
- Контент-команда подтверждает, что может самостоятельно настраивать главную.
- Гайд включает разделы «Как скрыть блок», «Как восстановить версию», «Как добавить пост дев-блога».
- После обучения проводится успешная контрольная публикация на тестовом окружении.
