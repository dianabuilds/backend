{% extends "admin/layout.html" %}
{% block title %}{{ 'Edit Node' if node else 'Create Node' }}{% endblock %}
{% block content %}
<h1 class="h3 mb-4 text-gray-800">{{ 'Edit Node' if node else 'Create Node' }}</h1>
<form method="post">
  <div class="mb-3">
    <label class="form-label">Title</label>
    <input type="text" class="form-control" name="title" value="{{ node.title if node else '' }}" />
  </div>
  <div class="mb-3">
    <label class="form-label">Content format</label>
    <select class="form-select" name="content_format">
      {% for fmt in formats %}
      <option value="{{ fmt }}" {% if node and node.content_format.value == fmt %}selected{% endif %}>{{ fmt }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Content</label>
    <textarea class="form-control" name="content" rows="6">{{ node.content if node else '' }}</textarea>
  </div>
  <div class="mb-3">
    <label class="form-label">Tags (comma separated)</label>
    <input type="text" class="form-control" name="tags" value="{{ node.tag_slugs|join(',') if node else '' }}" />
  </div>
  <div class="form-check mb-2">
    <input class="form-check-input" type="checkbox" name="is_public" id="is_public" {% if node and node.is_public %}checked{% endif %}>
    <label class="form-check-label" for="is_public">Public</label>
  </div>
  <div class="form-check mb-2">
    <input class="form-check-input" type="checkbox" name="is_visible" id="is_visible" {% if not node or node.is_visible %}checked{% endif %}>
    <label class="form-check-label" for="is_visible">Visible</label>
  </div>
  <div class="form-check mb-2">
    <input class="form-check-input" type="checkbox" name="allow_feedback" id="allow_feedback" {% if not node or node.allow_feedback %}checked{% endif %}>
    <label class="form-check-label" for="allow_feedback">Allow Feedback</label>
  </div>
  <div class="form-check mb-2">
    <input class="form-check-input" type="checkbox" name="is_recommendable" id="is_recommendable" {% if not node or node.is_recommendable %}checked{% endif %}>
    <label class="form-check-label" for="is_recommendable">Recommendable</label>
  </div>
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" name="premium_only" id="premium_only" {% if node and node.premium_only %}checked{% endif %}>
    <label class="form-check-label" for="premium_only">Premium only</label>
  </div>
  <button type="submit" class="btn btn-primary">Save</button>
  <a href="/admin/nodes" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}
