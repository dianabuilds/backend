{% extends "base.html" %}
{% import "components/macros.html" as ui %}

{% block content %}

<!-- Actions bar -->
<div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4">
  <div>
    <h1 class="text-2xl font-bold">Nodes</h1>
    <p class="text-sm opacity-70">Список узлов и быстрый переход к редактированию</p>
  </div>
  <div class="flex gap-2">
    {{ ui.searchbar("/admin/nodes", "Поиск по заголовку или slug", query) }}
    <a href="/admin/nodes/new" class="btn btn-primary">Создать узел</a>
  </div>
</div>

{% call ui.table_container() %}
<table class="table table-zebra">
  <thead>
    <tr>
      <th class="w-24">ID</th>
      <th>Title</th>
      <th class="w-64">Slug</th>
      <th class="w-32">Visible</th>
      <th class="w-40 text-right">Действия</th>
    </tr>
  </thead>
  <tbody>
  {% for n in items %}
    <tr>
      <td class="font-mono text-sm">#{{ n.id }}</td>
      <td>{{ n.title }}</td>
      <td><span class="badge badge-outline">{{ n.slug }}</span></td>
      <td>
        {% if n.is_visible %}
          <span class="badge badge-success badge-sm">Да</span>
        {% else %}
          <span class="badge badge-ghost badge-sm">Нет</span>
        {% endif %}
      </td>
      <td class="text-right">
        <a href="/admin/nodes/{{ n.id }}/edit" class="btn btn-xs">Изменить</a>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endcall %}

<div class="mt-4 flex items-center justify-between">
  <div class="text-sm opacity-70">Найдено: {{ items|length }} (страница {{ page }} из {{ page_count }})</div>
  {{ ui.pagination(page, page_count, "/admin/nodes") }}
</div>

{% endblock %}
