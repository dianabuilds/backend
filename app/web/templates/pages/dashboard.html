{% extends "base.html" %}
{% import "components/macros.html" as ui %}

{% block content %}
<h1 class="text-2xl font-bold mb-4">Dashboard</h1>

<div class="stats stats-vertical md:stats-horizontal shadow mb-6">
  {{ ui.stat_card('👥', stats.users_total, 'Users') }}
  {{ ui.stat_card('✅', stats.users_active, 'Active users') }}
  {{ ui.stat_card('🧩', stats.nodes_total, 'Nodes') }}
  {{ ui.stat_card('🙈', stats.nodes_hidden, 'Hidden nodes') }}
  {{ ui.stat_card('🎯', stats.quests_total, 'Quests') }}
  {{ ui.stat_card('📅', stats.event_active, 'Active events') }}
</div>

<div class="card bg-base-100 shadow">
  <div class="card-body">
    <h2 class="card-title">New users per day</h2>
    <div id="dash-chart" class="mt-2"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script>
  const dashChart = new ApexCharts(document.querySelector('#dash-chart'), {
    chart: { type: 'area', height: 160, toolbar: { show: false } },
    series: [{ name: 'Users', data: {{ chart_series | tojson }} }],
    xaxis: { categories: {{ chart_labels | tojson }} },
    dataLabels: { enabled: false },
    stroke: { curve: 'smooth' },
    grid: { padding: { left: 0, right: 0 } }
  });
  dashChart.render();
</script>

{% endblock %}
