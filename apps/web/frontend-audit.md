# РђСѓРґРёС‚ С„СЂРѕРЅС‚РµРЅРґР° (2025-10-02)

## РљСЂР°С‚РєРѕ
- РћСЃРЅРѕРІРЅС‹Рµ СЌРєСЂР°РЅС‹ РёСЃРїРѕР»СЊР·СѓСЋС‚ РґСѓР±Р»РёСЂСѓРµРјСѓСЋ Р»РѕРіРёРєСѓ Р·Р°РіСЂСѓР·РєРё Рё РїР°РіРёРЅР°С†РёРё, С‡С‚Рѕ СѓСЃР»РѕР¶РЅСЏРµС‚ СЃРѕРїСЂРѕРІРѕР¶РґРµРЅРёРµ Рё РїСЂР°РІРєРё РѕС€РёР±РѕРє.
- РќР° СЃС‚СЂР°РЅРёС†Р°С… РїРѕ-РїСЂРµР¶РЅРµРјСѓ СЃРјРµС€Р°РЅС‹ С€Р°Р±Р»РѕРЅРЅС‹Рµ РєР»Р°СЃСЃС‹ РёР· РґРёР·Р°Р№РЅР° Tailux Рё РЅРѕРІС‹Рµ РєРѕРјРїРѕРЅРµРЅС‚С‹ РёР· `@ui`, С‡С‚Рѕ РґР°С‘С‚ РІРёР·СѓР°Р»СЊРЅС‹Рµ Рё UX-СЂР°Р·СЂС‹РІС‹.
- Р’ РєРѕРґРѕРІРѕР№ Р±Р°Р·Рµ РѕСЃС‚Р°Р»РѕСЃСЊ РјРЅРѕРіРѕ РІСЂРµРјРµРЅРЅС‹С… Р·Р°РіР»СѓС€РµРє, Р±СЌРєР°РїРѕРІ Рё РЅРµРёСЃРїРѕР»СЊР·СѓРµРјС‹С… РїСЂРµРґСЃС‚Р°РІР»РµРЅРёР№, РєРѕС‚РѕСЂС‹Рµ РІРЅРѕСЃСЏС‚ С€СѓРј РІ СЃС‚СЂСѓРєС‚СѓСЂСѓ РїСЂРѕРµРєС‚Р°.

## Р”СѓР±Р»РёРєР°С‚С‹ РєРѕРґР°
- РЎРѕСЃС‚РѕСЏРЅРёСЏ `page/pageSize/hasNext` Рё РѕРґРЅРѕС‚РёРїРЅС‹Рµ Р·Р°РіСЂСѓР·С‡РёРєРё РїРѕРІС‚РѕСЂСЏСЋС‚СЃСЏ РЅР° РЅРµСЃРєРѕР»СЊРєРёС… СЌРєСЂР°РЅР°С… (`setPage`, `setPageSize`, `hasNext`, `load`): `src/pages/content/nodes/NodesPage.tsx:76`, `src/pages/content/quests/QuestsPage.tsx:26`, `src/pages/content/tags/TagsPage.tsx:46`, `src/pages/notifications/BroadcastsPage.tsx:164`.
- Р’РµР·РґРµ РґР»СЏ debounce РїСЂРёРјРµРЅСЏРµС‚СЃСЏ СЂСѓС‡РЅРѕР№ `setTimeout` СЃ РѕРґРёРЅР°РєРѕРІРѕР№ СЃРёРіРЅР°С‚СѓСЂРѕР№ (`200 РјСЃ`), РІРјРµСЃС‚Рѕ РѕР±С‰РµР№ СѓС‚РёР»РёС‚С‹/С…СѓРєР°: `src/pages/content/quests/QuestsPage.tsx:90`, `src/pages/content/tags/TagsPage.tsx:120`, `src/pages/content/nodes/NodesPage.tsx:238`, `src/pages/notifications/BroadcastsPage.tsx:243`.
- РљРѕРЅСЃС‚Р°РЅС‚Р° СЂР°Р·РјРµСЂРѕРІ СЃС‚СЂР°РЅРёС†С‹ РѕР±СЉСЏРІР»СЏРµС‚СЃСЏ Р·Р°РЅРѕРІРѕ РІ РєР°Р¶РґРѕРј РјРѕРґСѓР»Рµ (`PAGE_SIZE_OPTIONS`): `src/pages/content/tags/TagsPage.tsx:24`, `src/pages/notifications/BroadcastsPage.tsx:84`, `src/pages/management/Audit.tsx:64`.
- Р Р°Р·РјРµС‚РєР° Р±РµР№РґР¶РµР№ СЃС‚Р°С‚СѓСЃРѕРІ/СЌРјР±РµРґРґРёРЅРіРѕРІ РїСЂРѕРґСѓР±Р»РёСЂРѕРІР°РЅР° РІ РЅРµСЃРєРѕР»СЊРєРёС… РјРµСЃС‚Р°С… Рё Р¶С‘СЃС‚РєРѕ Р·Р°РІСЏР·Р°РЅР° РЅР° РєР»Р°СЃСЃС‹ С€Р°Р±Р»РѕРЅР°: `src/pages/content/nodes/NodesPage.tsx:124`, `src/pages/content/nodes/components/NodesTable.tsx:99`.
- Р’Рѕ РјРЅРѕРіРёС… СЌРєСЂР°РЅР°С… РµС‰С‘ Р»РµР¶Р°С‚ `mock`-РґР°РЅРЅС‹Рµ РґР»СЏ fallback (РЅР°РїСЂРёРјРµСЂ, `src/pages/content/quests/QuestsPage.tsx:18`, `src/pages/content/drafts/DraftsPage.tsx:8`), С‡С‚Рѕ РґСѓР±Р»РёСЂСѓРµС‚ СЂРµР°Р»СЊРЅС‹Р№ РєРѕРЅС‚СЂР°РєС‚ API Рё СЃРєСЂС‹РІР°РµС‚ РѕС€РёР±РєРё.

## РЈСЃС‚Р°СЂРµРІС€РёРµ/РЅРµСЃРѕРіР»Р°СЃРѕРІР°РЅРЅС‹Рµ РєРѕРјРїРѕРЅРµРЅС‚С‹
- Р‘Р»РѕРє РјР°СЃСЃРѕРІС‹С… РґРµР№СЃС‚РІРёР№ РїРѕ СѓР·Р»Р°Рј РѕС‚РґР°С‘С‚ РєРЅРѕРїРєРё С‡РµСЂРµР· СЃС‚Р°СЂС‹Рµ РєР»Р°СЃСЃС‹ `btn-base btn`, РёРіРЅРѕСЂРёСЂСѓСЏ `@ui/Button`: `src/pages/content/nodes/components/NodesBulkActions.tsx:27`.
- Р’ `ContentLayout` РґРµР№СЃС‚РІРёСЏ РЅР°РІРёРіР°С†РёРё РІСЃС‘ РµС‰С‘ СЃРѕР±СЂР°РЅС‹ РЅР° `NavLink` СЃ С‚РµРјРё Р¶Рµ С€Р°Р±Р»РѕРЅРЅС‹РјРё РєР»Р°СЃСЃР°РјРё, РїРѕСЌС‚РѕРјСѓ РІС‹РіР»СЏРґСЏС‚ РёРЅР°С‡Рµ, С‡РµРј РєРЅРѕРїРєРё РёР· Р±РёР±Р»РёРѕС‚РµРєРё: `src/pages/content/ContentLayout.tsx:56`.
- РЎС‚СЂР°РЅРёС†Р° РєРІРµСЃС‚РѕРІ РёСЃРїРѕР»СЊР·СѓРµС‚ РєР°СЃС‚РѕРјРЅС‹Рµ РєРЅРѕРїРєРё Рё `select` СЃ РєР»Р°СЃСЃР°РјРё С€Р°Р±Р»РѕРЅР°, РІРјРµСЃС‚Рѕ СѓРЅРёС„РёС†РёСЂРѕРІР°РЅРЅС‹С… РєРѕРјРїРѕРЅРµРЅС‚РѕРІ: `src/pages/content/quests/QuestsPage.tsx:144`, `src/pages/content/quests/QuestsPage.tsx:196`, `src/pages/content/quests/QuestsPage.tsx:208`.
- Р‘РµР№РґР¶Рё СЃС‚Р°С‚СѓСЃРѕРІ СЂРµРЅРґРµСЂСЏС‚СЃСЏ С‡РµСЂРµР· `span` СЃ РєР»Р°СЃСЃР°РјРё `badge`, С…РѕС‚СЏ РІ `@ui` СѓР¶Рµ РµСЃС‚СЊ `Badge`: `src/pages/content/nodes/NodesPage.tsx:127`, `src/pages/content/nodes/components/NodesTable.tsx:99`.

## РќРµСЃРѕРІРїР°РґРµРЅРёСЏ РІ СЃС‚РёР»СЏС… Рё С‚РµРєСЃС‚Р°С…
- РќР° СЃС‚СЂР°РЅРёС†Рµ РєРІРµСЃС‚РѕРІ Рё С‡РµСЂРЅРѕРІРёРєРѕРІ РєРёСЂРёР»Р»РёС†Р° РёСЃРїРѕСЂС‡РµРЅР° РёР·-Р·Р° РЅРµРІРµСЂРЅРѕР№ РєРѕРґРёСЂРѕРІРєРё СЃС‚СЂРѕРє, С‡С‚Рѕ СЂРµРЅРґРµСЂРёС‚СЃСЏ РєСЂР°РєРѕР·СЏР±СЂР°РјРё: `src/pages/content/quests/QuestsPage.tsx:18`, `src/pages/content/drafts/DraftsPage.tsx:6`.
- Р§Р°СЃС‚СЊ РёРЅС‚РµСЂС„РµР№СЃР° РїРѕ-РїСЂРµР¶РЅРµРјСѓ Р°РЅРіР»РѕСЏР·С‹С‡РЅР°СЏ, РґР°Р¶Рµ РєРѕРіРґР° С„Р»РѕСѓ С†РµР»РёРєРѕРј СЂСѓСЃРёС„РёС†РёСЂРѕРІР°РЅ (РЅР°РїСЂРёРјРµСЂ, Р·Р°РіРѕР»РѕРІРєРё Рё РѕРїРёСЃР°РЅРёСЏ РІ `ContentLayout`): `src/pages/content/ContentLayout.tsx:52`, `src/pages/content/ContentLayout.tsx:136`.
- РќР° СЃС‚СЂР°РЅРёС†Рµ С‚РµРіРѕРІ РѕС‚РѕР±СЂР°Р¶Р°СЋС‚СЃСЏ Р°РЅРіР»РѕСЏР·С‹С‡РЅС‹Рµ РїСѓСЃС‚С‹Рµ СЃРѕСЃС‚РѕСЏРЅРёСЏ Рё Р»РѕР°РґРµСЂС‹, РІС‹Р±РёРІР°СЋС‰РёРµСЃСЏ РёР· РѕСЃС‚Р°Р»СЊРЅРѕР№ Р»РѕРєР°Р»РёР·Р°С†РёРё: `src/pages/content/tags/TagsPage.tsx:369`, `src/pages/content/tags/TagsPage.tsx:376`.

## РџСЂРѕР±Р»РµРјС‹ РІ РІРµСЂСЃС‚РєРµ Рё РґСЂРѕРІРµСЂР°С…
- РљРѕРјРїРѕРЅРµРЅС‚ `Drawer` РЅРµ РѕР±СЉСЏРІР»СЏРµС‚ `role="dialog"` Рё `aria-modal`, Р·Р°С‚Рѕ РѕСЃС‚Р°РІР»СЏРµС‚ РЅРµРІРёРґРёРјСѓСЋ РїР°РЅРµР»СЊ РІ DOM (`pointer-events-none`), РёР·-Р·Р° С‡РµРіРѕ С„РѕРєСѓСЃ РјРѕР¶РЅРѕ СѓРІРµСЃС‚Рё Р·Р° РїСЂРµРґРµР»С‹ РґСЂРѕРІРµСЂР°: `src/shared/ui/primitives/Drawer.tsx:14`.
- Р’РЅСѓС‚СЂРё `Drawer` РѕС‚СЃСѓС‚СЃС‚РІСѓРµС‚ С„РѕРєСѓСЃ-Р»РѕРІСѓС€РєР° Рё Р°РІС‚РѕРїРµСЂРµРІРѕРґ С„РѕРєСѓСЃР° РЅР° Р·Р°РіРѕР»РѕРІРѕРє/РїРµСЂРІС‹Р№ СЌР»РµРјРµРЅС‚ РїСЂРё РѕС‚РєСЂС‹С‚РёРё, РїРѕСЌС‚РѕРјСѓ РєР»Р°РІРёР°С‚СѓСЂРЅР°СЏ РЅР°РІРёРіР°С†РёСЏ Р»РѕРјР°РµС‚СЃСЏ: `src/shared/ui/primitives/Drawer.tsx:21`.
- Р—Р°РєСЂС‹РІР°СЋС‰Р°СЏ РєРЅРѕРїРєР° РґСЂРѕРІРµСЂР° РїСЂРµРґСЃС‚Р°РІР»РµРЅР° СЃРёРјРІРѕР»РѕРј `Г—` Р±РµР· РёРєРѕРЅРєРё/РѕРїРёСЃР°РЅРёСЏ, С‡С‚Рѕ РїР»РѕС…Рѕ СЂР°СЃРїРѕР·РЅР°С‘С‚СЃСЏ СЌРєСЂР°РЅРЅС‹РјРё РґРёРєС‚РѕСЂР°РјРё: `src/shared/ui/primitives/Drawer.tsx:26`.

## РСЃРїРѕР»СЊР·РѕРІР°РЅРёРµ alert/prompt/confirm
- РњРѕРґР°Р»РєРё РїРѕРґС‚РІРµСЂР¶РґРµРЅРёСЏ Рё РѕС€РёР±РєРё РїРѕРєР°Р·Р°РЅС‹ С‡РµСЂРµР· Р±СЂР°СѓР·РµСЂРЅС‹Рµ `alert/prompt/confirm`, Р±РµР· СѓРЅРёС„РёС†РёСЂРѕРІР°РЅРЅРѕРіРѕ UI: `src/pages/content/nodes/NodesPage.tsx:377`, `src/pages/content/nodes/NodesPage.tsx:416`, `src/pages/content/nodes/NodesPage.tsx:422`, `src/pages/content/nodes/NodesPage.tsx:432`.
- РќР° СЃС‚СЂР°РЅРёС†Рµ С‚РµРіРѕРІ РѕС€РёР±РєРё СѓРґР°Р»РµРЅРёР№/РјРµСЂР¶РµР№ РІС‹РІРѕРґСЏС‚СЃСЏ `alert`, С‡С‚Рѕ СЂРµР¶РµС‚ UX Рё Р±Р»РѕРєРёСЂСѓРµС‚ РїРѕС‚РѕРє: `src/pages/content/tags/TagsPage.tsx:186`, `src/pages/content/tags/TagsPage.tsx:201`, `src/pages/content/tags/TagsPage.tsx:228`.
- РЈРїСЂР°РІР»РµРЅРёРµ СЃС‚СЂР°С‚РµРіРёСЏРјРё СЃРІСЏР·РµР№ С‚РѕР¶Рµ РїР°РґР°РµС‚ С‡РµСЂРµР· `alert`, РІРјРµСЃС‚Рѕ РЅРѕСЂРјР°Р»СЊРЅРѕР№ РЅРѕС‚РёС„РёРєР°С†РёРё: `src/pages/content/relations/RelationsPage.tsx:337`.

## РљРѕРЅСЃРѕР»СЊРЅС‹Рµ РІРѕСЂРЅРёРЅРіРё Рё РіР»СѓС€РµРЅРёРµ РѕС€РёР±РѕРє
- РћС€РёР±РєРё Р·Р°РіСЂСѓР·РєРё РІРѕ РјРЅРѕРіРёС… СЌРєСЂР°РЅР°С… РїСЂРѕСЃС‚Рѕ Р»РѕРіРёСЂСѓСЋС‚СЃСЏ `console.warn` Рё С‚РµСЂСЏСЋС‚СЃСЏ вЂ” РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ РѕСЃС‚Р°С‘С‚СЃСЏ Р±РµР· РѕР±СЂР°С‚РЅРѕР№ СЃРІСЏР·Рё: `src/pages/content/ContentDashboard.tsx:34`, `src/pages/content/nodes/NodesOverviewPage.tsx:28`, `src/pages/content/tags/TagsPage.tsx:115`.

## РњРµСЂС‚РІС‹Р№ РєРѕРґ Рё Р°СЂС‚РµС„Р°РєС‚С‹
- `ContentDashboard` Р±РѕР»СЊС€Рµ РЅРµ СЃРјРѕРЅС‚РёСЂРѕРІР°РЅ (РјР°СЂС€СЂСѓС‚ `/content` СЂРµРґРёСЂРµРєС‚РёС‚), РЅРѕ С„Р°Р№Р» Рё РІСЃРµ Р·Р°РІРёСЃРёРјС‹Рµ РєРѕРјРїРѕРЅРµРЅС‚С‹ `Tops` РѕСЃС‚Р°Р»РёСЃСЊ: `src/pages/content/ContentDashboard.tsx:13`, `src/pages/content/Tops/TopTags.tsx:20`, `src/pages/content/Tops/Searches.tsx:20`, `src/pages/content/Tops/Edits.tsx:23`.
- РЎС‚СЂР°РЅРёС†Р° С‡РµСЂРЅРѕРІРёРєРѕРІ Р»РµР¶РёС‚ РІ Р±РѕРµРІРѕРј РєР°С‚Р°Р»РѕРіРµ, С…РѕС‚СЏ РјР°СЂС€СЂСѓС‚ РїРµСЂРµР°РґСЂРµСЃСѓРµС‚ РЅР° Р±РёР±Р»РёРѕС‚РµРєСѓ СѓР·Р»РѕРІ: `src/pages/content/drafts/DraftsPage.tsx:13`, `src/App.tsx:171`.
- Р’ РєР°С‚Р°Р»РѕРіРµ С‚РµРіРѕРІ С…СЂР°РЅРёС‚СЃСЏ СЃС‚Р°СЂС‹Р№ Р±СЌРєР°Рї `TagsPage.tsx.bak`, РєРѕС‚РѕСЂС‹Р№ РЅРµ РґРѕР»Р¶РµРЅ РїРѕРїР°РґР°С‚СЊ РІ Р±РёР»Рґ: `src/pages/content/tags/TagsPage.tsx.bak:1`.

## РЎС‚СЂСѓРєС‚СѓСЂРЅС‹Рµ Р·Р°РјРµС‡Р°РЅРёСЏ
- РќРµРёСЃРїРѕР»СЊР·СѓРµРјС‹Рµ РїСЂРµРґСЃС‚Р°РІР»РµРЅРёСЏ (`DraftsPage`, `ContentDashboard`, `Tops/*`) Рё Р±СЌРєР°Рї-С„Р°Р№Р»С‹ Р»СѓС‡С€Рµ РїРµСЂРµРЅРµСЃС‚Рё РІ Р°СЂС…РёРІ/`legacy` Р»РёР±Рѕ СѓРґР°Р»РёС‚СЊ, С‡С‚РѕР±С‹ РЅРµ РІРІРѕРґРёС‚СЊ РєРѕРјР°РЅРґСѓ РІ Р·Р°Р±Р»СѓР¶РґРµРЅРёРµ.
- РћР±С‰РёРµ С…РµР»РїРµСЂС‹ РґР»СЏ РїР°РіРёРЅР°С†РёРё, debounce Рё Р±РµР№РґР¶РµР№ СЃС‚РѕРёС‚ РІС‹РЅРµСЃС‚Рё РІ `src/shared` вЂ” СЃРµР№С‡Р°СЃ РєР°Р¶РґР°СЏ СЃС‚СЂР°РЅРёС†Р° СЂРµР°Р»РёР·СѓРµС‚ СЃРІРѕСЋ РІРµСЂСЃРёСЋ Рё СѓРІРµР»РёС‡РёРІР°РµС‚ СЃС‚РѕРёРјРѕСЃС‚СЊ РёР·РјРµРЅРµРЅРёР№.

## Р§С‚Рѕ РґРµР»Р°С‚СЊ РґР°Р»СЊС€Рµ
1. Р’С‹РґРµР»РёС‚СЊ РѕР±С‰РёРµ С…СѓРєРё/СѓС‚РёР»РёС‚С‹ РґР»СЏ РїР°РіРёРЅР°С†РёРё Рё Р·Р°РіСЂСѓР·РєРё, Р·Р°РјРµРЅРёС‚СЊ РїСЂСЏРјС‹Рµ `alert/prompt/confirm` РЅР° РєРѕРјРїРѕРЅРµРЅС‚РЅС‹Рµ РјРѕРґР°Р»РєРё/С‚РѕСЃС‚С‹.
2. РџРµСЂРµРІРµСЃС‚Рё РєРЅРѕРїРєРё Рё Р±РµР№РґР¶Рё РЅР° РєРѕРјРїРѕРЅРµРЅС‚С‹ `@ui`, РїРѕС‡РёРЅРёС‚СЊ С‚РµРєСЃС‚РѕРІС‹Рµ СЃС‚СЂРѕРєРё (РєРѕРґРёСЂРѕРІРєР°, Р»РѕРєР°Р»РёР·Р°С†РёСЏ) Рё РїСЂРёРІРµСЃС‚Рё `Drawer` Рє РґРѕСЃС‚СѓРїРЅРѕРјСѓ РїРѕРІРµРґРµРЅРёСЋ.
3. РЈРґР°Р»РёС‚СЊ РёР»Рё Р°СЂС…РёРІРёСЂРѕРІР°С‚СЊ РјС‘СЂС‚РІС‹Рµ СЃС‚СЂР°РЅРёС†С‹ Рё Р±СЌРєР°Рї-С„Р°Р№Р»С‹, С‡С‚РѕР±С‹ СЂР°СЃС‡РёСЃС‚РёС‚СЊ СЃС‚СЂСѓРєС‚СѓСЂСѓ Рё РїСЂРµРґРѕС‚РІСЂР°С‚РёС‚СЊ СЃР»СѓС‡Р°Р№РЅС‹Рµ РёРјРїРѕСЂС‚С‹.

## Lighthouse-РїСЂРѕС†РµРґСѓСЂР°
- РЎР±РѕСЂРєР° + preview: `npm run build && npm run preview -- --port 4173`.
- РњРѕР±РёР»СЊРЅС‹Р№ Р°СѓРґРёС‚: `npx lighthouse http://localhost:4173/ --preset=mobile --output json --output-path var/lighthouse-home.json`.
- РўСЂРµР±СѓРµРјС‹Рµ РјРµС‚СЂРёРєРё: LCP в‰¤ 2.5 s, CLS в‰¤ 0.1, TBT в‰¤ 200 ms, РёС‚РѕРіРѕРІС‹Р№ Р±Р°Р»Р» в‰Ґ 85.
- РџРµСЂРµРґ СЂРµР»РёР·РѕРј РїСЂРѕРІРµСЂСЏРµРј `/dev-blog` Рё РєРѕРЅРєСЂРµС‚РЅС‹Р№ РїРѕСЃС‚; РѕС‚С‡С‘С‚С‹ РїСЂРёРєР»Р°РґС‹РІР°РµРј Рє Р·Р°РґР°С‡Рµ.`

## Wave 0 — baseline и чек-лист
- Перфоманс мобайл: home 61, dev-blog 73 при цели ≥85 (источники: `var/lighthouse-home.json`, `var/lighthouse-devblog.json`). Проверку ведёт @irina.m, апдейты каждый пятничный sync в #web-platform.
- SEO мобайл: 92 против цели 95; нужны правки мета-тегов и hreflang (`var/lighthouse-home.json`). Ответственный @oleg.s.
- Entry bundle: 0.055 MB (<1.2 MB) после сплиттинга. См. обновлённый `var/frontend-bundle.json` и разнос `vendor-*` чанков.
- Тяжёлые ленивые чанки: vendor-charts-BI2fpLVM.js ≈0.56 MB, vendor-editor-Bd39Bf-k.js ≈0.21 MB (загружаются только после перехода в наблюдение/редактор).
- CLS держится в норме (0.0), но следим за новыми лендингами.

### Wave-1 чек-лист
- [ ] Lazy-load hero изображения и снять повторное измерение Lighthouse.
- [x] Вынести Quill/markdown editor в динамические чанки, пересобрать бандл.
- [ ] Проверить `npm run preview` caching headers и prefetch критических API.
- [ ] Подготовить weekly дашборд с публикацией скоров Lighthouse и размерами чанков.

